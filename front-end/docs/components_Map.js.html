<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>components/Map.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Alert">Alert</a></li><li><a href="global.html#App">App</a></li><li><a href="global.html#Home">Home</a></li><li><a href="global.html#Layout">Layout</a></li><li><a href="global.html#Login">Login</a></li><li><a href="global.html#MapComponent">MapComponent</a></li><li><a href="global.html#Navbar">Navbar</a></li><li><a href="global.html#Signup">Signup</a></li><li><a href="global.html#isAuthenticated">isAuthenticated</a></li><li><a href="global.html#reportWebVitals">reportWebVitals</a></li><li><a href="global.html#router">router</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">components/Map.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect, useState, useRef } from "react";
import L from "leaflet";
import "leaflet/dist/leaflet.css";

/**
 * Map component for displaying a map with a table of data.
 *
 * @component
 * @returns {Element}
 */
const MapComponent = () => {
  const [tableData, setTableData] = useState([]);
  const mapRef = useRef(null);

  useEffect(() => {
    const container = L.DomUtil.get("map");
    if (container != null) {
      container._leaflet_id = null;
    }

    const map = L.map("map").setView([51.505, -0.09], 13);
    mapRef.current = map;

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "Â© OpenStreetMap contributors",
    }).addTo(map);

    const addMarker = (e) => {
      const { lat, lng } = e.latlng;
      L.marker([lat, lng]).addTo(map);
    };

    map.on("click", addMarker);

    return () => {
      map.remove();
    };
  }, []);

  const handleRowClick = (latitude, longitude) => {
    console.log("Clicked row with latitude:", latitude, "longitude:", longitude);

    if (latitude !== undefined &amp;&amp; longitude !== undefined &amp;&amp; mapRef.current) {
      const map = mapRef.current;
      map.setView([latitude, longitude], 13);
    } else {
      console.error("Invalid latitude or longitude");
    }
  };

  useEffect(() => {
    async function retrieveData() {
      const requestOptions = {
        method: "GET",
        credentials: "include",
      };

      const backendUrl = "http://localhost:5000/retrieve-all";

      try {
        const response = await fetch(backendUrl, requestOptions);
        const data = await response.json();

        if (response.ok) {
          console.log(data);
          setTableData(data);
        } else {
          console.log("Data fetch error:", data);
        }
      } catch (error) {
        console.log("Error fetching user data:", error);
      }
    }

    retrieveData().then(() => {
      console.log("Data retrieved");
    });
  }, []);

  return (
      &lt;div>
        &lt;div id="map" style={{ height: "500px" }}>&lt;/div>
        &lt;table className="table">
          &lt;thead>
          &lt;tr>
            &lt;th scope="col">#&lt;/th>
            &lt;th scope="col">Establishment Name&lt;/th>
            &lt;th scope="col">Address&lt;/th>
            &lt;th scope="col">City&lt;/th>
            &lt;th scope="col">State&lt;/th>
            &lt;th scope="col">Zip&lt;/th>
            &lt;th scope="col">Discount&lt;/th>
            &lt;th scope="col">Submitter ID&lt;/th>
          &lt;/tr>
          &lt;/thead>
          &lt;tbody>
          {tableData.map((data, index) => (
              &lt;tr
                  key={index}
                  onClick={() => handleRowClick(data[11], data[12])}
                  style={{ cursor: "pointer" }}
              >
                &lt;th scope="row">{data[0]}&lt;/th>
                &lt;td>{data[1]}&lt;/td>
                &lt;td>{data[2]}&lt;/td>
                &lt;td>{data[3]}&lt;/td>
                &lt;td>{data[4]}&lt;/td>
                &lt;td>{data[5]}&lt;/td>
                &lt;td>{data[6]}&lt;/td>
                &lt;td>{data[13]}&lt;/td>
              &lt;/tr>
          ))}
          &lt;/tbody>
        &lt;/table>
      &lt;/div>
  );
};

export default MapComponent;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Tue Apr 23 2024 22:19:29 GMT-0400 (Eastern Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
